{
	"info": {
		"_postman_id": "4aa99e1e-df58-4064-bae3-04c5ba392e10",
		"name": "MVP CLM APIs",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "9022700"
	},
	"item": [
		{
			"name": "Health Check",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{_url}}/health",
					"host": [
						"{{_url}}"
					],
					"path": [
						"health"
					]
				}
			},
			"response": []
		},
		{
			"name": "Customer Sign Up",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"let date = new Date()",
							"let y = date.getFullYear();",
							"let m = `${(date.getMonth()+1)}`.padStart(2,'0');",
							"let d = `${(date.getDate())}`.padStart(2,'0');",
							"let h = date.getHours()",
							"let n = date.getMinutes()",
							"let s = date.getUTCSeconds()",
							"var no = `${y}${m}${d}${h}${n}${s}`;",
							"// pm.environment.set(\"i\", no);",
							"",
							"var subtractYears = (numOfYears, date = new Date()) => date.setFullYear(date.getFullYear() - numOfYears);",
							"var getDate = (years) => new Date(subtractYears(years)).toISOString().split('T')[0];",
							"var adult = getDate(18)",
							"var child = getDate(10)",
							"pm.environment.set(\"_birth_date\", adult);",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"customer\": {\n        \"names\": \"Juan Carlos\",\n        \"first_surname\": \"Montes\",\n        \"last_surname\": \"de la Rosa\",\n        \"cellular_phone_number\": \"{{_mobile}}\",\n        \"birth_date\": \"{{_birth_date}}\",\n        \"password\": \"{{_pwd}}\",\n        \"password_confirmation\": \"{{_pwd}}\"\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{_url}}/customers",
					"host": [
						"{{_url}}"
					],
					"path": [
						"customers"
					]
				}
			},
			"response": []
		},
		{
			"name": "Customer Sign In",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.environment.set(\"jwt\", pm.response.json().token.access);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"customer\": {\n        \"cellular_phone_number\": \"{{_mobile}}\",\n        \"password\": \"{{_pwd}}\"\n    }\n}\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{_url}}/sessions",
					"host": [
						"{{_url}}"
					],
					"path": [
						"sessions"
					]
				}
			},
			"response": []
		},
		{
			"name": "Customer Profile*",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{jwt}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{_url}}/customers",
					"host": [
						"{{_url}}"
					],
					"path": [
						"customers"
					]
				}
			},
			"response": []
		},
		{
			"name": "Customer Update*",
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{jwt}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"customer\": {\n        \"names\": \"Modifiñáëì-e'd again\",\n        \"first_surname\": \"Por cinco\",\n        \"last_surname\": \"del Mazo\",\n        \"gender\": \"Male\",\n        \"zip_code\": \"00002\"\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{_url}}/customers",
					"host": [
						"{{_url}}"
					],
					"path": [
						"customers"
					]
				}
			},
			"response": []
		},
		{
			"name": "Sign Out Client*",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
						"key": "Authorization",
						"value": "Bearer {{jwt}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{_url}}/sessions",
					"host": [
						"{{_url}}"
					],
					"path": [
						"sessions"
					]
				}
			},
			"response": []
		},
		{
			"name": "Transaction Partial",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"var store = \"e061f0eb-73ce-4a89-a7c2-599751ea2a84\"",
							"var customer = \"21b1958a-d883-418e-a1a1-44b7be4c3d37\"",
							"var program = \"275c8522-0e44-4907-8064-10c6de6bd638\"",
							"",
							"pm.environment.set(\"store_id\", store);",
							"pm.environment.set(\"customer_id\", customer);",
							"pm.environment.set(\"program_id\", program);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"transaction\": {\n        \"cashier_id\": \"1122334455\",\n        \"amount\": \"3500\",\n        \"operation_type\": \"acumula\",\n        \"receipt_number\": \"123\",\n        \"metadata\": {},\n        \"program_id\": \"{{program_id}}\",\n        \"line_items\": [\n            { \"quantity\": 1, \"measurement_unit\": \"piece\", \"unit_price\": 1200, \"sku\": 12344566 }\n        ],\n        \"date\": \"2022-07-24\",\n        \"store_id\": \"{{store_id}}\",\n        \"payment_methods\": [\n            { \"type\": \"\", \"amount\": 10.5, \"installments\": \"1\" },\n            { \"type\": \"tarjeta_credito\", \"amount\": 4.5 },\n            { \"type\": \"femsacoins\", \"amount\": 20 }\n        ],\n        \"customer_id\": \"{{customer_id}}\",\n        \"currency\": \"MXN\"\n    }\n}\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{_url}}/ledger_entries",
					"host": [
						"{{_url}}"
					],
					"path": [
						"ledger_entries"
					]
				}
			},
			"response": []
		},
		{
			"name": "Transaction Complete",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"var store = \"d43f435a-74b8-4c83-9678-9a82f77253b5\"",
							"var customer = \"010bea29-94bb-4de2-8926-fb6dfba048b1\"",
							"var program = \"ec29404d-aa5e-4602-b4dc-845e88099e01\"",
							"",
							"pm.environment.set(\"store_id\", store);",
							"pm.environment.set(\"customer_id\", customer);",
							"pm.environment.set(\"program_id\", program);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"transaction\": {\n        \"cashier_id\": \"1122334455\",\n        \"amount\": \"3500\",\n        \"operation_type\": \"acumula\",\n        \"receipt_number\": \"123\",\n        \"metadata\": {},\n        \"program_id\": \"{{program_id}}\",\n        \"line_items\": [\n            {\n                \"quantity\": 1, \"measurement_unit\": \"piece\", \"unit_price\": 1200, \"sku\": 12344566,\n                \"discount\": 1, \"category\": \"food\", \"taxes_description\": \"IVA\", \"brand\": 0,\n                \"code_bar\": 121421412312, \"taxes\": 15, \"upc\": 0, \"final_price\": 1999\n            }\n        ],\n        \"date\": \"2022-07-24\",\n        \"store_id\": \"{{store_id}}\",\n        \"payment_methods\": [\n            { \"type\": \"\", \"amount\": 10.5, \"installments\": \"1\" },\n            { \"type\": \"tarjeta_credito\", \"amount\": 4.5 },\n            { \"type\": \"femsacoins\", \"amount\": 20 }\n        ],\n        \"customer_id\": \"{{customer_id}}\",\n        \"currency\": \"MXN\"\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{_url}}/ledger_entries",
					"host": [
						"{{_url}}"
					],
					"path": [
						"ledger_entries"
					]
				}
			},
			"response": []
		}
	]
}